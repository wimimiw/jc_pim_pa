C51 COMPILER V7.06   BRO20W_CPU                                                            04/24/2006 10:56:53 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE BRO20W_CPU
OBJECT MODULE PLACED IN .\OUTPUT\bro20W_cpu.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE APP\bro20W_cpu.c BROWSE INCDIR(.\APP;.\drive;.\LPC900) DEBUG OBJECTEXTEND P
                    -RINT(.\list\bro20W_cpu.lst) OBJECT(.\OUTPUT\bro20W_cpu.obj)

stmt level    source

   1          
   2          /**-------------文件信息--------------------------------------------------------------------------------
   3          **文   件   名: cpu.c
   4          **创   建   人: 程莺红
   5          **修   改   人: 
   6          **最后修改日期: 2006年3月31日
   7          **最 新 版  本: V1.2
   8          **描        述: 完成cpu的I/O口以及看门够、中断等的初始化
   9          **
  10          **--------------历史版本信息----------------------------------------------------------------------------
  11          ** 创建人: 程莺红 
  12          ** 版  本: V1.2
  13          ** 日　期: 2006年3月31日
  14          ** 描　述: 原始版本
  15          **
  16          ********************************************************************************************************/
  17          #include <reg938.h>
  18          #include <timer.h>
  19          #include <I2C.h>
  20          
  21          /*
  22          *********************************************************************************************************
  23          *                         初始化系统信息
  24          *
  25          * Description: 初始化系统/IO口，中断开启
  26          *
  27          * Arguments  : 无
  28          * Returns    : 无
  29          *********************************************************************************************************
  30          */
  31          void InitCpu(void)
  32          {
  33   1      
  34   1              
  35   1              P0M1 = 0x16;            //P0.0为推挽输出，P0.1，P0.2为仅为输入,P0.3为推挽输出
  36   1              P0M2 = 0x49;            //P0.4,P0.5为准双向口，P0.6为推挽输出，P0.7为准双向
  37   1                                                      //P0.0 - RFswitch       P0.1 - AD0(ReflectionPWR)       P0.2 - AD01(OutputPWR)  P0.3 - PAswitch
  38   1                                                      //P0.4 - PDA(inPWR) P0.5 - PCL                                  P0.6 - LD                               P0.7 - RDE
  39   1      
  40   1              P1M1 = 0xAE;            //P1.0为推挽输出，P1.1为仅为输入，P1.2、P1.3为开漏
  41   1          P1M2 = 0x5D;                //P1.4为推挽输出, P1.5仅为输入，P1.6为推挽输出，P1.7仅为输入
  42   1                                                      //P1.0 - TXD            P1.1 - RXD                                      P1.2 - SCL                              P1.3 - SDA
  43   1                                                      //P1.4 - WP                     P1.5 - RST                                      P1.6 - LE1                              P1.7 - AD04(PAcurrent)
  44   1      
  45   1              P2M1 = 0x1B;            //P2.0,P2.1仅为输入，P2.2，P2.3推挽输出
  46   1              P2M2 = 0xE4;            //P2.4仅为输入,P2.5推挽输出，P2.6，P2.7推挽输出
  47   1                                                      //P2.0 - Lnafail        P2.1 - Limyes                           P2.2 - DATA                             P2.3 - 空闲
  48   1                                                      //P2.4 - Lockyes        P2.5 - CLK                                      P2.6 - LE2                              P2.7 - LE3
  49   1      
  50   1              P3M1 = 0x02;            //P3.0推挽输出，P3.1仅为输入
  51   1              P3M2 = 0x01;
  52   1               
  53   1              ACC = WDCON;            //读取WDT控制寄存器 
  54   1              ACC = ACC|0x04;         //置位ACC.2准备启动WDT 
C51 COMPILER V7.06   BRO20W_CPU                                                            04/24/2006 10:56:53 PAGE 2   

  55   1              WDL = 0xFF;             //设置8位倒计时器初值 
  56   1              WDCON = ACC;            //启动WDT 
  57   1              WFEED1 = 0xA5;          //清零第一部分 
  58   1              WFEED2 = 0x5A;          //清零第二部分 
  59   1       
  60   1               
  61   1                
  62   1              WP = 1;                         //打开写保护，芯片只能读不能写
  63   1              EA = 1; 
  64   1      
  65   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     44    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
