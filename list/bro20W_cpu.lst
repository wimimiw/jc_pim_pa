C51 COMPILER V9.51   BRO20W_CPU                                                            10/30/2014 16:21:18 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE BRO20W_CPU
OBJECT MODULE PLACED IN .\OUTPUT\bro20W_cpu.obj
COMPILER INVOKED BY: C:\Program Files\Keil\C51\BIN\C51.EXE APP\bro20W_cpu.c OPTIMIZE(9,SIZE) REGFILE(.\OUTPUT\my_project
                    -.ORC) BROWSE INCDIR(.\APP;.\drive;.\LPC900) DEBUG OBJECTEXTEND PRINT(.\list\bro20W_cpu.lst) TABS(2) OBJECT(.\OUTPUT\bro2
                    -0W_cpu.obj)

line level    source

   1          
   2          /**-------------文件信息--------------------------------------------------------------------------------
   3          **文   件   名: cpu.c
   4          **创   建   人: 程莺红
   5          **修   改   人: 
   6          **最后修改日期: 2006年3月31日
   7          **最 新 版  本: V1.2
   8          **描        述: 完成cpu的I/O口以及看门够、中断等的初始化
   9          **
  10          **--------------历史版本信息----------------------------------------------------------------------------
  11          ** 创建人: 程莺红 
  12          ** 版  本: V1.2
  13          ** 日　期: 2006年3月31日
  14          ** 描　述: 原始版本
  15          **
  16          ********************************************************************************************************/
  17          #include <reg938.h>
  18          #include <timer.h>
  19          #include <I2C.h>
  20          
  21          /*
  22          *********************************************************************************************************
  23          *                         初始化系统信息
  24          *
  25          * Description: 初始化系统/IO口，中断开启
  26          *
  27          * Arguments  : 无
  28          * Returns    : 无
  29          *********************************************************************************************************
  30          */
  31          void InitCpu(void)
  32          {
  33   1                  // PORT   Configuration FUNC        P0M1    P0M2
  34   1        P0M1 = 0x07;    // P0.0 --- 仅为输入------- Pacurrent---------  1     0 
  35   1        P0M2 = 0xC8;    // P0.1   仅为输入    PAout           1     0
  36   1                  // P0.2 --- 仅为输入------- PAref --------------1     0
  37   1                  // P0.3   推挽输出------ost-------------------0     1       
  38   1                  // P0.4 --- 准双向口------- PDA-----------------0     0
  39   1                  // P0.5   准双向口    PCL         0     0
  40   1                  // P0.6 --- 推挽输出------- LD   ---------------0     1
  41   1                  // P0.7   推挽输出    RDE         0     1
  42   1      
  43   1                  // PORT   Configuration FUNC        P1M1    P1M2
  44   1        P1M1 = 0x2E;    // P1.0 --- 推挽输出------- TXD --------------- 0---------- 1 
  45   1        P1M2 = 0x9D;    // P1.1   仅为输入    RXD         1     0
  46   1                  // P1.2 --- 开漏输出------- SCL --------------- 1---------- 1
  47   1                  // P1.3   开漏输出    SDA         1     1
  48   1                  // P1.4 --- 推挽输出------- WP  ------------- 0---------- 1
  49   1                  // P1.5   仅为输入    RST         1     0
  50   1                  // P1.6 --- 准双向口------- 空闲  ------------- 0---------- 0
  51   1                  // P1.7   推挽输出    RFswitch      0     1
  52   1      
  53   1                  // PORT   Configuration FUNC        P2M1    P2M2
C51 COMPILER V9.51   BRO20W_CPU                                                            10/30/2014 16:21:18 PAGE 2   

  54   1        P2M1 = 0x0A;    // P2.0 --- 准双向口------- 空闲------------  0---------- 0 
  55   1        P2M2 = 0xf4;    // P2.1   仅为输入    LimYes          1     0
  56   1                  // P2.2 --- 推挽输出------- LD2 ------------  0---------- 1
  57   1                  // P2.3   仅为输入    LockYes       1     0
  58   1                  // P2.4 --- 推挽输出------- DATA------------  0---------- 1
  59   1                  // P2.5   推挽输出    CLK         0     1
  60   1                  // P2.6 --- 推挽输出  ----  v3.3c  ------------ 0----------1
  61   1                  // P2.7   准双向口      空闲          0     1
  62   1      
  63   1                  // PORT   Configuration FUNC        P3M1    P3M2
  64   1        P3M1 = 0x02;    // P3.0 --- 推挽输出------- XTAL2 --------------0---------- 1 
  65   1        P3M2 = 0x01;    // P3.1   仅为输入    XTAL1       1     0
  66   1      
  67   1      
  68   1         
  69   1        ACC = WDCON;    //读取WDT控制寄存器 
  70   1        ACC = ACC|0x04;   //置位ACC.2准备启动WDT 
  71   1        WDL = 0xFF;     //设置8位倒计时器初值 
  72   1        WDCON = ACC;    //启动WDT 
  73   1        WFEED1 = 0xA5;    //清零第一部分 
  74   1        WFEED2 = 0x5A;    //清零第二部分 
  75   1       
  76   1         
  77   1          
  78   1        WP = 1;       //打开写保护，芯片只能读不能写
  79   1          EA = 1; 
  80   1      
  81   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     44    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
